<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Carte Topo avec QGIS</title><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}







 .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>Carte Topo avec QGIS</h1><p>On propose ici de réaliser un équivalent de la carte topographique de l&#39;I.G.N. avec QGIS et des données ouvertes (ou presque) et gratuites. </p><p>Ce tuto comporte beaucoup trop de GIF (fallait bien que je m&#39;amuse à l&#39;écrire aussi).</p><p><img src='https://66.media.tumblr.com/f5f41be2045f473c8237ab5933455148/tumblr_inline_o4lq6jSZ4m1s9x8us_500.gif' alt='' referrerPolicy='no-referrer' /></p><h2><a name='header-n4' class='md-header-anchor '></a>Éléments nécessaires</h2><ul><li>QGIS 3</li><li>Police : Formata Condensed Regular / Bold / Italique (&quot;$&quot;) ou équivalentes gratuites qui font relativement bien illusion comme Noto Sans Display Black Condensed (<a href='https://www.google.com/get/noto/' target='_blank' class='url'>https://www.google.com/get/noto/</a>) ou OPTIFob-DemiBold (<a href='https://www.ffonts.net/OPTIFob-DemiBold.font.download' target='_blank' class='url'>https://www.ffonts.net/OPTIFob-DemiBold.font.download</a>)</li></ul><h2><a name='header-n10' class='md-header-anchor '></a>Données nécessaires</h2><ul><li>Hydrographie : on utilise la BD TOPO-HYDROGRAPHIE de l&#39;I.G.N., avec les couches SURFACE_EAU et TRONCON_COURS_EAU (<a href='http://professionnels.ign.fr/bdtopo-hydrographie' target='_blank' class='url'>http://professionnels.ign.fr/bdtopo-hydrographie</a>) et la BD Sandre pour les labels (<a href='http://www.sandre.eaufrance.fr/atlas/srv/fre/catalog.search#/metadata/0a0977fa-746b-441d-b4c1-4bf5e36998b0' target='_blank' class='url'>http://www.sandre.eaufrance.fr/atlas/srv/fre/catalog.search#/metadata/0a0977fa-746b-441d-b4c1-4bf5e36998b0</a>)</li><li>Bâtiments : extraction depuis le cadastre Etalab (<a href='https://cadastre.data.gouv.fr/datasets/cadastre-etalab' target='_blank' class='url'>https://cadastre.data.gouv.fr/datasets/cadastre-etalab</a> et sélectionner la couche bâtiments)</li><li>Réseaux de transport : extraction O.S.M. (<a href='https://export.hotosm.org/en/v3/exports/new/select/treetag' target='_blank' class='url'>https://export.hotosm.org/en/v3/exports/new/select/treetag</a> sélectionner dans Transportation : Roads &amp; Railway)</li><li>Communes : Geofla / AdminExpress (<a href='http://professionnels.ign.fr/adminexpress' target='_blank' class='url'>http://professionnels.ign.fr/adminexpress</a>) + export OSM <a href='https://www.data.gouv.fr/fr/datasets/decoupage-administratif-communal-francais-issu-d-openstreetmap/' target='_blank' class='url'>https://www.data.gouv.fr/fr/datasets/decoupage-administratif-communal-francais-issu-d-openstreetmap/</a></li><li>Relief : le EU-DEM de Copernicus. La résolution est de 25m, on peut le rééchantilloner afin d&#39;obtenir quelque chose de plus fin et lisse (<a href='https://land.copernicus.eu/imagery-in-situ/eu-dem/eu-dem-v1.1' target='_blank' class='url'>https://land.copernicus.eu/imagery-in-situ/eu-dem/eu-dem-v1.1</a>)</li><li>Occupation du sol : vecteur départemental par le CESBIO (<a href='http://osr-cesbio.ups-tlse.fr/~oso/' target='_blank' class='url'>http://osr-cesbio.ups-tlse.fr/~oso/</a>)</li></ul><h2><a name='header-n24' class='md-header-anchor '></a>1. Éléments de base</h2><p>Ouvrir QGIS 3 puis créer un nouveau projet.  </p><h3><a name='header-n26' class='md-header-anchor '></a>1.1 Relief</h3><p>On télécharge le Modèle Numérique de Terrain (DEM) sur le site de Copernicus (inscription gratuite nécessaire). Si on travaille sur la France métropolitaine, il y a une bonne probabilité que ce soit la tuile E30N20. </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553950143431.png' alt='1553950143431' referrerPolicy='no-referrer' /></p><p>C&#39;est assez lourd, mais cela vaut la peine. Une fois extrait cela donne ceci : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553955465086.png' alt='1553955465086' referrerPolicy='no-referrer' /></p><p>Cela étant la première couche, le système de projection du projet s&#39;y réfère et passe en système européen ETRS89 (EPSG:3035). Comme on va produire une carte à grande échelle, le niveau de détail va être important. On va donc s&#39;intéresser à une zone particulière pas trop grande et le tuto produira ici des cartographies se situant sur des zones du Vaucluse ou à proximité.</p><p>C&#39;est bien gentil, mais comment on se repère dans tout ça ?</p><p><img src='https://i.pinimg.com/originals/16/12/87/161287e215d0839f75f32d69625cd102.gif' alt='dontpanic' referrerPolicy='no-referrer' /></p><p>On double-clic sur la couche OpenStreetMap dans l&#39;explorateur. Le fond OSM se rajoute par dessus notre couche de relief (par défaut, une couche se rajoute toujours par-dessus la couche active). On doublc-clic sur la couche, pour accéder aux propriétés, dans le panneau Transparence, on règle l&#39;opacité à 50% afin de voir à travers.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553957322486.png' alt='1553957322486' referrerPolicy='no-referrer' /></p><p>Note : le fond OSM n&#39;apparaît pas net car il est déformé par notre système de projection. Si vous voulez des fonds cartographiques issus du web nets, il faut vous mettre en WGS84 / Pseudo-Mercator (EPSG:3857).</p><p>&nbsp;</p><p>Une fois la zone repérée, on va faire une extraction du raster afin de travailler avec une zone et des fichiers plus petits : Raster &gt; Extraction &gt; Découper un raster selon une emprise...</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553959359016.png' alt='1553959359016' referrerPolicy='no-referrer' /></p><p>On sélectionne notre raster et dans l&#39;étendue de découpage, on clique sur les ... et on choisit &quot;Sélectionner l&#39;emprise depuis le canvas&quot;.</p><p>De là on trace un rectangle un peu large autour de notre zone d&#39;intérêt et on clique sur exécuter :</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553961007703.png' alt='1553961007703' referrerPolicy='no-referrer' /></p><p>On ne garde que la couche découpée (clic-droit supprimer pour enlever une couche).</p><p>Pour voir ce que cela donne, on peut rapidement visualiser un effet 3d avec les paramètres suivants : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553961196957.png' alt='1553961196957' referrerPolicy='no-referrer' /></p><p>Si de loin, l&#39;effet est tout à fait satisfaisant, de près je trouve qu&#39;une résolution de 25m est limite pour une cartographie à cette échelle. Par exemple ici au 1:10000 on a clairement un effet pixelisé désagréable.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553961350561.png' alt='1553961350561' referrerPolicy='no-referrer' /></p><p>Pour pallier à cela, on va rééchantilloner notre raster à une résolution de 5 m (taille de la cellule de la région GRASS) avec la fonction resamp.bspline de GRASS : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553961715302.png' alt='1553961715302' referrerPolicy='no-referrer' /></p><p>Je vous conseille d&#39;enregistrer directement les résultats dans un fichier plutôt que de les laisser dans la mémoire (selon le département 1-2 Go)</p><p>Ça prend un bon moment là encore, mais le résultat est quand même sympa.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554216198508.png' alt='1554216198508' referrerPolicy='no-referrer' /></p><p>On ne va garder que la couche Resampled BSpline (ou bien nommée comme vous l&#39;avez choisie / relief dans la suite du tuto)</p><p>Encore quelques instants à passer pour générer les contours : à 5m (intervalle)  Raster &gt; Extraction &gt; Contours</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553963882459.png' alt='1553963882459' referrerPolicy='no-referrer' /></p><p>Le temps que notre couche soit produite, prenons un moment pour observer le rendu de la topographie. Plusieurs éléments participent à la bonne perception du relief :</p><ul><li>les courbes de niveau, de couleur &quot;whiskey&quot;, avec un épaississement et l&#39;inscription de l&#39;altitude pour celles multiples de 50 (en gros). Écartement de 5 ou 10 m selon les endroits</li><li>un estompage / ombrage gris léger : en observant un peu on s&#39;aperçoit qu&#39;il y a sans doute un estompage multidirectionnel (certaines faces et un estompage d&#39;une lumière au nord-ouest.</li><li>les point cotés, petits points noirs avec l&#39;altitude indiquée</li></ul><p>On commence par les courbes de niveaux : l&#39;ombrage sera réglé en fonction, pour renforcer l&#39;effet de relief produit par les isoplèthes.</p><p>(Si vous n&#39;êtes pas satisfait des courbes produites, un lissage peut être une bonne solution : Traitements &gt; Lissage, valeurs par défaut)</p><p>Symbologie de la couche contours &gt; Ensemble de règles </p><ul><li><p>Première règle : </p><ul><li>expression (Filtre) : </li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>"ELEV" % 50 = 0</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 17px;"></div><div class="CodeMirror-gutters" style="display: none; height: 17px;"></div></div></div></pre><ul><li>L&#39;idée est de créer une catégorie à part pour les altitudes multiples de 50, pour cela on se sert du modulo (%). </li><li>Type de symbole : Ligne simple</li><li>Couleur : #d7a573 . L&#39;idée est de prévoir marron assez clair pour qu&#39;avec les différents éléments du fond de carte, les lignes ressortent toujours à peu près</li><li>Largeur de trait : 4 mètres. Pour toute la symbologie à venir, comme elle sera très abondante, on utilisera des valeurs en mètres. Sinon lors des opérations de zoom et dézoom, ...</li></ul><p><img src='https://66.media.tumblr.com/827a0306a5736c2519479c5dc2dafdef/tumblr_o7bigkMKVS1v4lxllo1_400.gif' alt='' referrerPolicy='no-referrer' /></p></li><li><p>Deuxième règle :</p><ul><li>Cocher la case &quot;Sinon&quot; (ELSE)</li><li>Type de symbole : Ligne simple</li><li>Couleur : #d7a573</li><li>Largeur de trait : 1.5 mètres</li></ul></li><li><p>Rendu de couche : Mode de fusion = Multiplier</p></li><li><p>Maintenant les étiquettes &gt; Etiquettes basées sur des règles :</p><ul><li>expression (Filtre) : </li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>"ELEV" % 50 = 0</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 17px;"></div><div class="CodeMirror-gutters" style="display: none; height: 17px;"></div></div></div></pre><ul><li>Étiqueter avec : ELEV</li><li>Police : Formata Condensed </li><li>Style : Regular</li><li>Taille : 27.5 mètres</li><li>Tampon &gt; Afficher un tampon : Taille 5 mètres, blanc, opacité à 75%, Répéter tous les 1000 mètres</li><li>Position : Incurvé, Sur la ligne, Orientation suivant la position</li></ul><p>Si tout va bien, on obtient quelque chose dans ce goût-là.</p></li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554216514840.png' alt='1554216514840' referrerPolicy='no-referrer' /></p><p>On voit déjà bien le relief, mais l&#39;ombrage aide sensiblement à appréhender les angles.</p><p>En fait les ombrages : un ombrage multidirectionnel et un ombrage normal. On duplique donc la couche raster de relief (clic-droit dupliquer).</p><p><img src='https://media3.giphy.com/media/eobkbFQvvHoGY/giphy.gif' alt='' referrerPolicy='no-referrer' /></p><p>Il faut adapter le rendu de façon à suffisament rendre compte du relief sans que la carte ne devienne trop sombre et que certaines zones soient totalement masquées par l&#39;ombrage. C&#39;est un jeu d&#39;équilibriste entre plusieurs paramètres:</p><ul><li><p>le facteur z : l&#39;altitude doit-elle être exagérée (multipliée en l&#39;occurence) afin de rendre compte des petits reliefs? comment se distribuent les altitudes sur mon espace à cartographier ? est-ce très plat ? est-ce très accidenté? </p><p><img src='https://secondcropcreative.com/perfectloops/images/Mount-Susana-Time-Lapse.gif' alt='' referrerPolicy='no-referrer' /></p><p>&nbsp;</p></li><li><p>la transparence</p></li></ul><p><img src='http://bribriange49.b.r.pic.centerblog.net/ba497e51.gif' alt='' referrerPolicy='no-referrer' /></p><ul><li>la luminosité</li></ul><p><img src='https://media.giphy.com/media/kkwNMltw0h6Qo/giphy.gif' alt='' referrerPolicy='no-referrer' /></p><ul><li><p>le contraste</p><p><img src='https://media.giphy.com/media/qMA4TF7tPAIzC/giphy.gif' alt='' referrerPolicy='no-referrer' /></p></li><li><p>la teinte : pour coloriser le raster avec plus ou moins d&#39;intensité</p></li></ul><p><img src='https://memegenerator.net/img/instances/67523573/what-is-your-favorite-color.jpg' alt='' referrerPolicy='no-referrer' /></p><ul><li>le mode de fusion : la façon dont les couches se comportent les unes par rapport aux autres</li></ul><p><img src='https://static.mmzstatic.com/wp-content/uploads/2013/08/merlin.gif' alt='' referrerPolicy='no-referrer' /></p><p>Pour régler &#39;à la volée&#39; les différents paramètres, on va sélectionner notre couche de relief et cliquer sur le bouton style. Cela permet une visualisation en direct des actions appliquées et quand on change de couche, le menu reste ouvert.</p><p>Avec un ombrage : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554216772546.png' alt='1554216772546' referrerPolicy='no-referrer' /></p><p>Avec le deuxième par-dessus : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554216813106.png' alt='1554216813106' referrerPolicy='no-referrer' /></p><p><img src='https://i.gifer.com/6Cv9.gif' alt='' referrerPolicy='no-referrer' /></p><p>Nos opérations rasters terminées, on va changer de système de projection afin de bénéficier d&#39;une déformation cartographique plus propice à la visualisation du territoire français : RGF93 / Lambert-93 (EPSG:2154). Pour cela, on clique sur le bouton de projection : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1553956092834.png' alt='1553956092834' referrerPolicy='no-referrer' /></p><p>On recherche 2154 dans la barre de filtre et on choisit RGF93 / Lambert-93 (EPSG:2154).</p><p>Les couches vont se déformer. </p><p><img src='https://media.giphy.com/media/WJMB7T6K6VKXC/giphy.gif' alt='' referrerPolicy='no-referrer' /></p><p>Aux différentes échelles, nos couches se comportent relativement bien, on considère donc que c&#39;est suffisant.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554216979662.png' alt='1554216979662' referrerPolicy='no-referrer' /></p><h3><a name='header-n282' class='md-header-anchor '></a>1.2 Hydrographie</h3><p>Pour l&#39;hydrographie, une seule source de données ne donnant pas satisfaction, j&#39;en utilise trois :</p><ul><li>les TRONCONS_COURS_EAU de BD-TOPO-HYDRO : pour les petits cours d&#39;eau, cours d&#39;eau intermittents, etc.</li><li>les SURFACES_EAU de BD-TOPO-HYDRO : pour les grosses rivières, fleuves et toutes les surfaces en eau (lacs, étangs, réservoirs...)</li><li>la BD Sandre qui est la plus pratique à utiliser pour les étiquettes des cours d&#39;eau</li></ul><p>Pour plus de praticité, je vous conseille de créer un sous-ensemble de chaque couche spécifique à votre zone d&#39;intérêt, ce sera plus facile à travailler et styliser.</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Traitement &gt; Gdal &gt; Découper des vecteurs selon une emprise &gt; et dans étendue de découpage vous cliquez sur les ... pour définir ce que vous voulez garder.</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 34px;"></div><div class="CodeMirror-gutters" style="display: none; height: 34px;"></div></div></div></pre><p>On commence par charger la couche SURFACE_EAU. Ce qu&#39;on remarque vite, c&#39;est que les surfaces ne sont pas continues. Par exemple,différents polygones coexistent pour cette même rivière:</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554217965413.png' alt='1554217965413' referrerPolicy='no-referrer' /></p><p>On a en fait deux catégorie principales liées à l&#39;attribut &quot;RÉGIME&quot; : les surfaces permanentes et les surfaces intermittentes. On va donc choisir une symbologie et le type &quot;Catégorisé&quot;, avec la colonne &quot;REGIME&quot;. On clique sur classer et nos deux catégories apparaissent en deux couleurs différentes.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554218227464.png' alt='1554218227464' referrerPolicy='no-referrer' /></p><p>On va commencer par régler le plus simple : le permanent. </p><p>On double-clic sur la ligne Permanent pour régler sa symbologie. </p><p>Symbologie &gt; Remplissage &gt; Remplissage simple</p><ul><li>Couleur de remplissage : #b3d9fe, un bleu clair </li></ul><p>Si on laisse tel quel avec cette bordure noire, on s&#39;aperçoit d&#39;entrée d&#39;un problème lié à la construction des polygones, la surface n&#39;est toujours pas continue ! </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554218873392.png' alt='1554218873392' referrerPolicy='no-referrer' /></p><p>Pour résoudre ce problème, on peut fusionner les entités, mais une astuce de paramétrage de la symbologie de QGIS va nous permettre de contourner ce fastidieux traitement.</p><p><img src='https://media1.tenor.com/images/dfeb59044cfb1facf715b1e156d7154e/tenor.gif?itemid=9754281' alt='' referrerPolicy='no-referrer' /></p><ul><li>En style de trait : Pas de ligne</li><li>On crée soi-même la ligne de contour du polygone en cliquant sur le + vert : on choisit &quot;Bordure : Ligne simple&quot; et une largeur de trait de 2.5m. La couleur est #1b8dfc.</li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554219138367.png' alt='1554219138367' referrerPolicy='no-referrer' /></p><p>Ensuite, dans la symbologie de la couche SURFACE_EAU, on clique sur Avancé et on ouvre le menu des Niveaux de symboles, que l&#39;on active. Il faut mettre votre élément surfacique &quot;par-dessus&quot; votre élément linéaire, on met donc 1 en face de l&#39;élément surfacique et on laisse zéro en face de l&#39;élément linéaire (pas de symbole affiché, c&#39;est que la visualisation des symboles en &quot;mètres&quot; a encore du mal à s&#39;afficher correctement dans les icones)</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554219623722.png' alt='1554219623722' referrerPolicy='no-referrer' /></p><p>On applique et bingo, les limites entre deux surfaces d&#39;eaux permanentes ont disparues ! </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554219675400.png' alt='1554219675400' referrerPolicy='no-referrer' /></p><p>Les surfaces en eaux de façon intermittentes sont représentées en gros de la façon suivante : un hachurage horizontal bleu + un ensemble de petits points bleus aléatoirement distribués.</p><p>On clic sur la symbologie de la catégorie Intermittent : </p><ul><li>un fond blanc, sans bordure</li><li>une couche de symboles de type &quot;Motif de lignes&quot; : espacement de 10 mètres, taille 1 unité de carte, couleur #1b8dfc.</li><li>plusieurs couches de symboles de types &quot;Motif de points&quot; : avec des espaces et grosseurs variables afin d&#39;avoir  une distribution suffisamment embrouillée pour qu&#39;on puisse penser qu&#39;il puisse y avoir quelque hasard là-dedans. C&#39;est que le générateur d&#39;improbabilité de QGIS n&#39;est pas encore hyper simple d&#39;accès (par le générateur de géométrie il doit toutefois être possible de faire quelque chose)</li></ul><p><img src='https://i.makeagif.com/media/5-12-2015/HA786z.gif' alt='' referrerPolicy='no-referrer' /></p><p>On arrive donc à quelque chose dans ce goût-là : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554224159197.png' alt='1554224159197' referrerPolicy='no-referrer' /></p><p>(à noter que si vous dézoomer assez, QGIS généralise vos lignes et la classe intermittente apparait alors en bleu uni un peu plus clair)</p><p>On a en fait besoin d&#39;une troisième typologie, pour les bassins et autres réservoirs (attribut &quot;NATURE&quot; = &#39;Bassin&#39;) qui sinon apparaissent en Intermittents. On a donc besoin de passer la typologie générale de la couche à &quot;Ensemble de règles&quot;. </p><p><del>OUF</del> Bingo ! les deux première règles sont conservées. On a juste à en ajouter une troisième avec l&#39;expression &quot;NATURE&quot; = &#39;Bassin&#39;. En fait, comme la symbologie doit être la même que les surfaces continues, on fait juste un clic droit sur la règle &quot;Permanent&quot; pour copier le style, et on colle cela sur notre nouvelle règle.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554301886854.png' alt='1554301886854' referrerPolicy='no-referrer' /></p><p>Il manque maintenant les autres cours d&#39;eau que l&#39;on a et que l&#39;on représente par le linéaire de la couche TRONCON_COURS_EAU.</p><p>Là encore, on refait une symbologie par catégorie sur le régime avec : </p><ul><li>Permanent : ligne, 3.5m d&#39;épaisseur, couleur #1b8dfc</li><li>Intermittent : ligne, 3.5 m d&#39;épaisseur, couleur #1b8dfc, style de trait Ligne en tiret, utiliser un modèle de tiret personnalisé tiret 30, espace 50 en unités de carte</li></ul><p>Et on place cette couche en dessous de la couche surface, de façon à ce que les tronçons déjà représentés dans les surfaces soient masqués.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554232205372.png' alt='1554232205372' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p>Il reste maintenant à ajouter les étiquettes des principaux cours d&#39;eau. Le plus difficile. Pour cela on se sert de la couche CoursEau_FXX de la BD Sandre. Si cette couche est la meilleure, elle n&#39;est néanmoins pas parfaite. Les </p><ul><li>remplacer les L&#39; par des l&#39; :  regexp_replace( &quot;NomEntiteH&quot;, &#39;L&#39;&#39;&#39;,&#39;l&#39;&#39;&#39;)</li><li>remplacer les &quot;La &quot; par des &quot;la &quot; :  regexp_replace( &quot;NomEntiteH&quot;, &#39;La &#39;,&#39;la &#39;)</li><li>remplacer les &quot;Le &quot; par des &quot;le&quot; : regexp_replace( &quot;NomEntiteH&quot;, &#39;Le &#39;,&#39;le &#39;)</li></ul><p>Une fois la bonne typo des étiquettes trouvée (peut-être plus précise, là c&#39;est juste l&#39;essentiel) : </p><ul><li><p>Symbologie : Aucun symbole (on ne veut que les étiquettes)</p></li><li><p>Étiquettes : Étiquettes basées sur des règles</p><ul><li><p>Règle 1 :  </p><ul><li>&quot;Classe&quot; =&#39;1&#39; </li><li>Étiqueter avec &quot;NomEntiteH&quot; </li><li>Formata Condensed Italic </li><li>Taille = 50m</li><li>Couleur = #1b8dfc</li><li>Espacement lettre = 25</li><li>Tampon : 5m, blanc, opaque</li><li>Position : Incurvé, sur la ligne, orientation suivant la position</li><li>Répéter tous les 15000 mètres</li></ul></li><li><p>Règle 2 : </p><ul><li><p> &quot;Classe&quot; NOT IN (&#39;1&#39;,&#39;6&#39;)</p></li><li><p>Étiqueter avec &quot;NomEntiteH&quot; </p></li><li><p>Formata Condensed Italic </p></li><li><p>Taille = 40m</p></li><li><p>Couleur = #1b8dfc</p></li><li><p>Espacement lettre = 25</p></li><li><p>Tampon : 5m, blanc, opaque</p></li><li><p>Position : Incurvé, à gauche ou à droite de la ligne, orientation suivant la position</p></li><li><p>Répéter tous les 15000 mètres</p><p>&nbsp;</p></li></ul></li></ul></li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554302788134.png' alt='1554302788134' referrerPolicy='no-referrer' /></p><p>C&#39;est tout pour l&#39;hydro à ce stade, ça pourrait être étoffer (noms des lacs, étiquetter les réservoirs, stations d&#39;épurations, etc.), mais l&#39;idée ici est d&#39;avoir la base (pour obtenir des couches de données supplémentaires, voir le modèle des requêtes overpass plus bas).</p><h3><a name='header-n130' class='md-header-anchor '></a>1.3 Occupation du sol</h3><p>Un peu de couleur ne ferait pas de mal à ce fond de carte. On s&#39;occupe maintenant de l&#39;occupation du sol. </p><p>Première couche à ajouter, les bâtiments ! </p><p><img src='http://img.playbuzz.com/image/upload/f_auto,fl_lossy,q_auto/cdn/4ba8a378-2da3-4ad2-8886-787f99a80189/9ff7dff0-5dfe-4686-8481-55d0e3345606.gif' alt='' referrerPolicy='no-referrer' /></p><p>Une fois que vous avez récupéré le json départemental ou communal sur <a href='https://cadastre.data.gouv.fr/' target='_blank' class='url'>https://cadastre.data.gouv.fr/</a>, décompressez-le et ajouter le dans QGIS.</p><p>La symbologie est des plus sommaires : </p><ul><li>Symbole unique</li><li>Couleur de remplissage : noir</li><li>Style de trait : pas de ligne</li><li>On met les Étiquettes sur l&#39;option Bloquant pour éviter de se retrouver avec plein de texte par dessus</li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554304433765.png' alt='1554304433765' referrerPolicy='no-referrer' /></p><p>Seconde couche d&#39;occupation du sol bien pratique : le travail effectué par l&#39;équipe du CESBIO avec des couches vectorielles départementales : <a href='http://osr-cesbio.ups-tlse.fr/echangeswww/TheiaOSO/vecteurs_2017/liste_vecteurs.html' target='_blank' class='url'>http://osr-cesbio.ups-tlse.fr/echangeswww/TheiaOSO/vecteurs_2017/liste_vecteurs.html</a></p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554304670199.png' alt='1554304670199' referrerPolicy='no-referrer' /></p><p>Bon alors évidemment comme ça, on fait...</p><p><img src='https://thumbs.gfycat.com/WelcomeArtisticIzuthrush-size_restricted.gif' alt='' referrerPolicy='no-referrer' /></p><p>Mais en fait si. Il faut juste une bonne symbologie : </p><p>Symbologie &gt; Catégorisé &gt; par &quot;Classe&quot;</p><ul><li><p>on ne va cocher que les cases : 31, 32, 34, 36, 46, 211, 221 et 222</p></li><li><p>Classe 31  = Forêt de feuillus</p><ul><li>Remplissage simple : couleur #d2fab9, style de trait = Pas de ligne</li><li>+au dessus Motif de points : distance horizontale  = 150m, verticale 100m, déplacement horizontal = 75m, vertical 0m. Symbole simple, taille = 25m, remplissage transparant, trait de couleur = #96e655 et d&#39;épaisseur 3 unités de carte. Symbole = cercle</li></ul></li><li><p>Classe 32 = Forêt de conifères</p><ul><li>Tout pareil, sauf que le symbole est un triangle de taille = 35m</li></ul></li><li><p>Classe 34 = pelouses </p><ul><li>Motif de points : Distance horizontale = 30 mètres, verticale = 15m, déplacement horizontal = 15m, vertical = 0m</li><li>Symbole simple : taille = 9 unités de cartes, couleur de trait = #96e655, taille de trait = 2 unités de carte, rotation = 90°. Le symbole c&#39;est ça :</li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554305868394.png' alt='1554305868394' referrerPolicy='no-referrer' /></p></li><li><p>Classe 36 = landes ligneuses</p><ul><li>idem que 31 ou 32 sans les symboles (juste le remplissage vert)</li></ul></li><li><p>Classe 46 = plages et dunes (notamment ici les berges de rivières)</p><ul><li>idem que 36</li></ul></li><li><p>Classe 211 = prairies</p><ul><li>idem que 34</li></ul></li><li><p>Classes 221 = vergers</p><ul><li><p>Ligne simple : largeur de trait 3m, couleur = #96e655</p></li><li><p>+par-dessus Motif de points : distance horizontale = 30m, verticale 30m, pas de déplacements</p><ul><li>symbole = symbole simple</li><li>Taille = 10 unités de carte</li><li>Remplissage transparent</li><li>Couleur de trait #96e655</li><li>Largeur = 2 unités de carte</li><li>Symbole = cercle</li></ul></li></ul></li><li><p>Classe 222 = vignes</p><ul><li>idem que 221 sauf que Symbole  = line | </li></ul></li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554306651491.png' alt='1554306651491' referrerPolicy='no-referrer' /></p><p>En option générale de la couche, on met Rendu = Multiplier afin que les ombrages apparaissent.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554307086185.png' alt='1554307086185' referrerPolicy='no-referrer' /></p><p>Et là, votre carte est déjà bien belle, il n&#39;y a pratiquement plus que les routes, les noms de lieux et des petites données par-ci par-là à rajouter. CESBIO bravo.</p><p><img src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwwHaZOYVS-FGP7y_pZS4wn3QV75HpirMuzbzYiG0e0rc7JlmFgQ' alt='' referrerPolicy='no-referrer' /></p><h3><a name='header-n783' class='md-header-anchor '></a>1.4 Réseaux de transport</h3><p>Là on va faire un petit tour par <a href='https://overpass-turbo.eu/' target='_blank' class='url'>https://overpass-turbo.eu/</a> qui va être votre ami (si, si) pour une bonne partie des données annexes que vous souhaitez rajouter.</p><p>La requête pour extraire les routes et voies de chemin de fer va être la suivante :</p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  // seulement les routes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  way["highway"]["highway"!="cycleway"]["highway"!="proposed"]["highway"!="footway"]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  // seulement les rails</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  way["railway"]["railway"="rail"]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 238px;"></div><div class="CodeMirror-gutters" style="display: none; height: 238px;"></div></div></div></pre><p>&nbsp;</p></blockquote><p>Une fois que la requête est finie, on clique sur exporter en geojson</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554308281385.png' alt='1554308281385' referrerPolicy='no-referrer' /></p><p>Lors de l&#39;ajout de la couche obtenue à QGIS, il est probable qu&#39;on vous propose plusieurs options : il faut choisir LineString.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554308443888.png' alt='1554308443888' referrerPolicy='no-referrer' /></p><p>On met ensuite en place une symbologie par Ensemble de règles</p><ul><li><p>Règle n°1 : autoroutes et nationales</p><ul><li><p>expression :  &quot;highway&quot; IN ( &#39;motorway&#39; , &#39;motorway_link&#39;, &#39;primary&#39;,&#39;primary_link&#39;)</p></li><li><p>symbologie : deux couches de lignes simples</p><ul><li>une rouge à 12m d&#39;épaisseur au-dessus</li><li>une noire à 14m d&#39;épaisseur en dessous</li><li>dans les deux cas, on met style de cap = Rond pour une gestion plus harmonieuse des jonctions</li></ul></li></ul></li><li><p>Règle n°2 : départementales</p><ul><li><p>expression :  &quot;highway&quot; IN (&#39;secondary&#39;, &#39;secondary_link&#39;)</p></li><li><p>symbologie : deux couches de lignes simples</p><ul><li>une orange (#ffa050) à 12m d&#39;épaisseur au-dessus</li><li>une noire à 14m d&#39;épaisseur en dessous</li><li>dans les deux cas, on met style de cap = Rond pour une gestion plus harmonieuse des jonctions</li></ul></li></ul></li><li><p>Règle n°3 : pistes et chemins</p><ul><li>expression :  &quot;highway&quot; IN (&#39;track&#39;, &#39;path&#39;)</li><li>symbologie : une ligne simple noire d&#39;épaisseur 3m et style de cap = rond</li></ul></li><li><p>Règle n°4 : autres routes</p><ul><li><p>expression : ELSE</p></li><li><p>symbologie : deux couches de lignes simples</p><ul><li>une blanche d&#39;épaisseur 9m au-dessus</li><li>une noir d&#39;épaisseur 11m en-dessous</li><li>dans les deux cas, on met style de cap = Rond pour une gestion plus harmonieuse des jonctions</li></ul></li></ul></li><li><p>Règle n°5 : voies de chemin de fer</p><ul><li><p>expression :  &quot;railway&quot; IS NOT NULL</p></li><li><p>symbologie : une ligne simple et une ligne de symboles</p><ul><li>ligne simple noire d&#39;épaisseur 7m en dessous</li><li>ligne de symboles avec un intervalle de 175m, symbole = trait, de taille 35m et largeur 3m</li></ul></li></ul></li></ul><p>On ajoute également des niveaux de symbole comme suit : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554322567289.png' alt='1554322567289' referrerPolicy='no-referrer' /></p><p>On applique...</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554322720583.png' alt='1554322720583' referrerPolicy='no-referrer' /></p><p>Les cartes IGN ont tendance à mettre la couche des bâtiments &quot;sous&quot; la couche des routes. Personnellement, je préfère accentuer les bâtiments donc je les mets au-dessus. </p><p>Au-dessus : </p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554323126438.png' alt='1554323126438' referrerPolicy='no-referrer' /></p><p>En dessous :</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554323176124.png' alt='1554323176124' referrerPolicy='no-referrer' /></p><p>Deuxième argument : les batiments sont représentés ici avec davantage de précision (pas de tampon ni rien déformant la géométrie), il est donc juste que ce soient eux qui rognent sur les symboles de routes plutôt que l&#39;inverse. Du coup, pour moi, au-dessus. Mordicus.</p><p><img src='https://66.media.tumblr.com/7405df11f63043516bbc801db5d38fdd/tumblr_nrretla1te1r745vdo4_500.gif' alt='' referrerPolicy='no-referrer' /></p><p>facultatif -&gt; Les étiquettes : étiquettes basées sur des règles</p><p>Règle : </p><ul><li>expression =  &quot;highway&quot; IN (&#39;motorway&#39;, &#39;primary&#39;, &#39;secondary&#39;)</li><li>Etiqueter avec : ref</li><li>Formata Regular</li><li>Taille 40 mètres</li><li>Noir</li><li>Tampon blanc 4 mètres</li><li>Position Incurvée : à gauche, à droite, orientation de la ligne suivant la position</li><li>Répéter tous les 5000 mètres</li><li>Dans rendu : bien cocher Fusionner les lignes connectées... (mais ne marche pas hyper bien sur notre jeu de données)</li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554323951035.png' alt='1554323951035' referrerPolicy='no-referrer' /></p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554324468215.png' alt='1554324468215' referrerPolicy='no-referrer' /></p><h3><a name='header-n133' class='md-header-anchor '></a>1.5 Lieux</h3><p>Dernière pierre de l&#39;édifice principal, les noms de lieux.</p><p>Pour cela on utilise trois sources de données : le GEOFLA + export OSM pour les communes et OSM pour le reste (lieux-dits / hameaux).</p><p>NB : on ne s&#39;occupe ici que des limites communales étant donné l&#39;échelle envisagée. </p><p>Aucune des deux couches communales ne nous satisfaisant entièrement, on va joindre des attributs du GEOFLA sur la couche OSM. Pour cela on double-clique sur la couche OSM puis sur jointure et sur le + vert.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554391865922.png' alt='1554391865922' referrerPolicy='no-referrer' /></p><p>On joint les champs : </p><ul><li>STATUT</li><li>X_CHF_LIEU</li><li>Y_CHF_LIEU</li><li>POPULATION</li></ul><p>On choisit un préfixe vierge. Et on applique. </p><p>On exporte cette nouvelle couche vers un autre fichier qui s&#39;ajoute automatiquement. On supprime les deux anciens.</p><p>Symbologie : Bordure : Ligne de symboles</p><ul><li>intervalle 20m</li><li>symbole = rond de 5m noir, sans bordure</li></ul><p>Étiquettes. Là ça se complique un peu.</p><p>On opte pour un ensemble de règles.</p><p><img src='https://media1.popsugar-assets.com/files/thumbor/cHHaJYeWrCFrqNDF-q1pdJnlKTs/fit-in/1200x630/filters:format_auto-!!-:strip_icc-!!-:fill-!white!-/2017/08/30/037/n/1922283/9aa62ef5a5a130a2_giphy-9/i/North-reject-Daenerys-queen.gif' alt='' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p>On va faire 3 règles : une pour les petites communes de moins de 5000 hab, une pour les préfectures de département ou région / sous-préfectures / capitale, et une où on met tout le reste.</p><p>L&#39;étiquette utilisée va être sur l&#39;attribut &#39;nom&#39; issu d&#39;OSM qui a les accents, tirets et tout comme il faut (vérifier l&#39;encodage lors du chargement de la couche si ce n&#39;est pas le cas).</p><p>Comme les noms de commune à rallonge sont fréquents on va opter pour la 1ere et la 3e règle d&#39;une modification appropriée de l&#39;étiquette. Au lieu d&#39;indiquer le nom on va opérer une expression efficace permettant le passage à la ligne : </p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">regexp_replace( nom, '(.{7}[^-.]*)-', '\\1-\n-')</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 17px;"></div><div class="CodeMirror-gutters" style="display: none; height: 17px;"></div></div></div></pre><p>Traduction : à partir du 7e caractère, s&#39;il y a un tiret, on le remplace par un tiret, suivi d&#39;un passage à la ligne puis à nouveau un tiret.</p><p> Du coup : </p><ul><li><p>Règle n°1 : Petites communes </p><ul><li>Expression :  &quot;POPULATION&quot; &lt; 5000</li><li>Étiqueter avec : regexp_replace( nom, &#39;(.{7}[^-.]*)-&#39;, &#39;\1-\n-&#39;)</li><li>Police Formata condensed Bold</li><li>Taille 120m</li><li>Tampon blanc 3m</li><li>Position : Donnée définie X =&gt; type de champ = X_CHF_LIEU &amp; Y =&gt;  type de champ = Y_CHF_LIEU</li></ul></li><li><p>Règle n°2 : préfecture &amp; cie</p><ul><li><p>Expression avec accents OK:  &quot;STATUT&quot; IN (  &#39;Capitale d&#39;&#39;État&#39; , &#39;Préfecture de département&#39; , &#39;Préfecture de région&#39; , &#39;Sous-préfecture&#39;  )</p></li><li><p>Expression avec accents pas OK :  &quot;STATUT&quot; IN (  &#39;Capitale d&#39;&#39;�tat&#39; , &#39;Pr�fecture de d�partement&#39; , &#39;Pr�fecture de r�gion&#39; , &#39;Sous-pr�fecture&#39;  )</p></li><li><p>Étiqueter avec : nom (possibilité de mettre la formule si vous souhaitez les raccourcir de la même façon)</p></li><li><p>Police Formata Condensed Bold</p></li><li><p>Taille 180m</p></li><li><p>Type de casse : Majuscules</p></li><li><p>Tampon blanc 3m</p></li><li><p>Arrière plan : Afficher un fond</p><ul><li>Forme : Rectangle</li><li>Type de taille : tampon</li><li>Taille X : 15m</li><li>Taille Y : 15m</li><li>Décalage Y : -7.5m</li><li>Couleur de remplissage : transparent</li><li>Couleur de trait : #ff00ff</li><li>Largeur de trait : 9m</li></ul></li><li><p>Position : Donnée définie X =&gt; type de champ = X_CHF_LIEU &amp; Y =&gt;  type de champ = Y_CHF_LIEU</p></li></ul></li><li><p>Règle n°3 : Autres</p><ul><li><p>Expression : ELSE</p></li><li><p>Étiqueter avec : regexp_replace( nom, &#39;(.{7}[^-.]*)-&#39;, &#39;\1-\n-&#39;)</p></li><li><p>Police Formata condensed Bold</p></li><li><p>Taille 150m</p></li><li><p>Type de casse : Majuscules</p></li><li><p>Tampon blanc 3m</p></li><li><p>Position : Donnée définie X =&gt; type de champ = X_CHF_LIEU &amp; Y =&gt;  type de champ = Y_CHF_LIEU</p></li><li><p>Arrière plan : afficher un fond</p><ul><li>Forme : rectangle</li><li>Type de taille : Fixé</li><li>Taille X : expression = length(&quot;nom&quot;)*95</li><li>Taille Y : 4.5m (épaisseur du trait /2)</li><li>Décalage Y : 75m</li><li>Couleur de remplissage : transparent</li><li>Couleur de trait : #ff00ff</li><li>Largeur de trait : 9m</li></ul><p>&nbsp;</p></li></ul></li></ul><p>Les étiquettes sont ici fixées géographiquement pour travailler dessus plus facilement (voir les bonus). Néanmoins on peut adoper une stratégie de placement plus libre autour du centroïde. L&#39;inconvénient de ce dernier système réside dans le placement parfois assez éloigné dû à la distance importante entre le centroïde et le centre de l&#39;unité morphologique de la commune. Sinon, les placer à la main.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554399763737.png' alt='1554399763737' referrerPolicy='no-referrer' /></p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554401147136.png' alt='1554401147136' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554400148019.png' alt='1554400148019' referrerPolicy='no-referrer' /></p><p>On va maintenant essayer de trouver ce qui fait aussi le charme des cartes topo, tous les petits noms de lieux qui assurent une certaine continuité dans la lecture de la carte et meublent un peu les espaces &quot;vides&quot;.</p><p>Pour cela, on a recours encore une fois à l&#39;api d&#39;overpass, avec maintenant la requête suivante :</p><p>Requête lieux-dits : </p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="Overpass QL"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="overpass ql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json][timeout:50];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// query part for: “hamlet”</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["place"="hamlet"]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["place"="isolated_dwelling"]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 221px;"></div><div class="CodeMirror-gutters" style="display: none; height: 221px;"></div></div></div></pre><p>Je ne prends ici que les lieux-dits/hameaux &quot;habités&quot;, pas les lieux-dits cadastraux qui d&#39;une part sont des polygones et d&#39;autre part et aussi par conséquent représentent souvent assez mal le territoire concerné par le nom que la DGFiP leur a attribué. Un certain nombre de ces lieux existent dans OSM, mais je suis forcé d&#39;avouer que j&#39;ai dû en créer un certain nombre pour que cela donne quelque chose de suffisant.</p><p>Donc si vous aussi il vous manque des lieux-dits par rapport à la carte topo I.G.N., n&#39;hésitez pas à les rajouter dans OSM : Ajouter un point &gt; le placer à côté du groupe de bâtiments concernés par le nom du lieu &gt; Choisir Lieu-dit ou hameau</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554401720976.png' alt='1554401720976' referrerPolicy='no-referrer' /></p><p>Ces changements seront répercutés rapidement sur un certain nombre de tiles OSM pour le web, aussi soyez suffisamment rigoureux quand vous effectuez ces ajouts.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554401883558.png' alt='1554401883558' referrerPolicy='no-referrer' /></p></blockquote><p>On charge le json obtenu dans QGIS et on applique la symbologie suivante : </p><p>Symbole : Aucun symbole</p><p>Étiquettes : </p><ul><li>Étiqueter avec : name</li><li>Police Formata Condensed Regular</li><li>Taille : 40 m</li><li>Tampon blanc 3m</li><li>Position cartographique</li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554402273549.png' alt='1554402273549' referrerPolicy='no-referrer' /></p><p>On en a fini pour les éléments principaux !</p><p>Le reste c&#39;est du bonus. </p><p>&nbsp;</p><h2><a name='header-n1298' class='md-header-anchor '></a>2. Bonus</h2><h3><a name='header-n143' class='md-header-anchor '></a>2.1 G.R.© et autres chemins de randonnée</h3><p>Comme je n&#39;ai rien trouvé de probant, j&#39;ai fait ma petite salade perso à partir de traces GPX et numérisations diverses et variées. </p><p>Vous pouvez télécharger ce fichier absolument dégueulasse topologiquement ici : </p><p>Pour la symbologie : Ligne simple, couleur #ff00ff, 10m d&#39;épaisseur, cap rond</p><p>Étiqueter avec name, taille 45m, condensed italic, #ff00ff, tampon blanc 4m, Position incurvée au dessus de la ligne, répéter tous les 5000m.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554403177414.png' alt='1554403177414' referrerPolicy='no-referrer' /></p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554403698598.png' alt='1554403698598' referrerPolicy='no-referrer' /></p><p>Pour tous les autres éléments, je passe par des requêtes d&#39;éléments OSM</p><p>On peut rajouter tous les éléments de détail que l&#39;on veut, on adapte juste la requête à l&#39;aide des clés OSM (<a href='https://wiki.openstreetmap.org/wiki/FR:%C3%89l%C3%A9ments_cartographiques' target='_blank' class='url'>https://wiki.openstreetmap.org/wiki/FR:%C3%89l%C3%A9ments_cartographiques</a>).</p><p><img src='https://media.giphy.com/media/VcizxCUIgaKpa/giphy.gif' alt='' referrerPolicy='no-referrer' /></p><p><em>(Cartographe faisant ses requêtes OSM)</em></p><h3><a name='header-n262' class='md-header-anchor '></a>2.2 Voies cyclables</h3><p>Requête : </p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  way["highway"]["highway"="cycleway"]({{bbox}});</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 187px;"></div><div class="CodeMirror-gutters" style="display: none; height: 187px;"></div></div></div></pre><p>Symbologie : Ligne simple, couleur #ff00ff, 10m d&#39;épaisseur, cap rond</p><p>Étiqueter avec : &#39;voie cyclable&#39;, taille 30m, condensed italic, #ff00ff, tampon blanc 4m, Position incurvée au dessus de la ligne, répéter tous les 7500m. Fusionner les lignes connectées pour éviter la duplication d&#39;étiquettes.</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554404593276.png' alt='1554404593276' referrerPolicy='no-referrer' /></p></blockquote><h3><a name='header-n1345' class='md-header-anchor '></a>2.3 Sources (d&#39;eau)</h3><p>Requête : </p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["natural"='spring']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 187px;"></div><div class="CodeMirror-gutters" style="display: none; height: 187px;"></div></div></div></pre></blockquote><p>Symbole : symbole simple (rond)</p><ul><li>taille : 7.5m</li><li>couleur de remplissage : transparent</li><li>couleur de trait : #1b8dfc</li><li>Largeur de trait : 15m</li></ul><p>Étiqueter avec : name</p><ul><li>Police : Formata Condensed Italic</li><li>Taille : 40m</li><li>Couleur : #1b8dfc</li><li>Tampon 5 m blanc</li><li>Position : cartographique</li></ul><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554405084786.png' alt='1554405084786' referrerPolicy='no-referrer' /></p><h3><a name='header-n1362' class='md-header-anchor '></a>2.4 Falaises et lignes de crête</h3><p>Requête  :</p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">way["natural"='ridge']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">way["natural"='cliff']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 204px;"></div><div class="CodeMirror-gutters" style="display: none; height: 204px;"></div></div></div></pre><p>Symbologie : Ligne noire+ Lignes de symboles de ^^^ noirs ou bruns, d&#39;espacement ou de longueur aléatoires</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554406966960.png' alt='1554406966960' referrerPolicy='no-referrer' /></p><h3><a name='header-n1404' class='md-header-anchor '></a>2.5 Cimetières</h3></blockquote><blockquote><p>Requête </p></blockquote><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  way["landuse"='cemetery']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 187px;"></div><div class="CodeMirror-gutters" style="display: none; height: 187px;"></div></div></div></pre><p>&nbsp;</p></blockquote><p>Symbologie : ligne noire, fond transparent, motif de croix</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554407275150.png' alt='1554407275150' referrerPolicy='no-referrer' /></p><h3><a name='header-n1407' class='md-header-anchor '></a>2.6 Panneaux indicateurs rando</h3><p>Requête </p><blockquote><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["hiking"='yes']["information" = 'guidepost']["name"~""]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt;;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 187px;"></div><div class="CodeMirror-gutters" style="display: none; height: 187px;"></div></div></div></pre><p>Symbologie : point rose, 10m, sans bordure</p><p>Etiquette : name, regular, 35m, rose, tampon 3m, position cartographique</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554408986811.png' alt='1554408986811' referrerPolicy='no-referrer' /></p><h3><a name='header-n1411' class='md-header-anchor '></a>2.7 Bornes kilométriques / géodésiques</h3><p>(Pour l&#39;altitude)</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["highway"='milestone']({{bbox}});</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 170px;"></div><div class="CodeMirror-gutters" style="display: none; height: 170px;"></div></div></div></pre><p>&nbsp;</p></blockquote><blockquote><p>Symbologie : </p><ul><li>symbole simple (rond)</li><li>taille : 10m</li><li>couleur de remplissage : noir</li><li>couleur de trait : blanc</li><li>largeur de trait : 1m</li></ul><p>Etiquette : </p><ul><li>CASE
WHEN  &quot;ele&quot; != &#39;0.0&#39;
THEN round( to_real( &quot;ele&quot;),0)
END</li><li>police formata condensed regular</li><li>Taille : 32.5m</li><li>Noir</li><li>Tampon blanc 2m</li><li>Position cartographique</li></ul></blockquote><p>On peut mettre le même genre de symbole pour les bornes géodésiques </p><p>(filtrer sur une valeur de ref : A, B, C... par ex : &quot;ref&quot; LIKE &#39;%- A&#39;)</p></blockquote><blockquote><pre lang="" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["man_made"='survey_point']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 204px;"></div><div class="CodeMirror-gutters" style="display: none; height: 204px;"></div></div></div></pre></blockquote><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554409047905.png' alt='1554409047905' referrerPolicy='no-referrer' /></p><h3><a name='header-n1516' class='md-header-anchor '></a>2.8 Antennes</h3><blockquote><blockquote><p>Requête </p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["tower:type"='communication']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["man_made"='antenna']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 204px;"></div><div class="CodeMirror-gutters" style="display: none; height: 204px;"></div></div></div></pre><p>Point noir, 10m sans bordure</p><p>Etiqueter avec &#39;Ant.&#39;, en italique, noir, 30m, tampon 3m blanc</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554409224694.png' alt='1554409224694' referrerPolicy='no-referrer' /></p><h3><a name='header-n1517' class='md-header-anchor '></a>2.9 Sommets - cols - points de vue</h3></blockquote></blockquote><p>Requête sommets-cols-pts de vue</p><blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[out:json];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// gather results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["natural"='peak']["name"~""]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["natural"='saddle']["name"~""]({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node["tourism"='viewpoint']({{bbox}});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">// print results</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out body;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt; ;</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">out skel qt;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 221px;"></div><div class="CodeMirror-gutters" style="display: none; height: 221px;"></div></div></div></pre><p>Symbologie : point noir et altitude pour les cols et sommets, on duplique pour avoir à la fois le label de nom et le label d&#39;altitude</p><p>Pour les points de vue, une deux croix roses superposées dont l&#39;une a une petite rotation</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554409657495.png' alt='1554409657495' referrerPolicy='no-referrer' /></p></blockquote></blockquote><p>&nbsp;</p><p><img src='https://raw.githubusercontent.com/rxlacroix/CarteTopoGeoNight/master/img/1554409700059.png' alt='1554409700059' referrerPolicy='no-referrer' /></p><hr /><p>Si vous avez survécu jusqu&#39;ici, voici le lien pour le projet QGIS avec les paramètres, il faut juste adapter les couches selon vos chemins d&#39;accès, ou abandonner celles que vous ne voulez pas !</p><p><img src='https://media.tenor.com/images/80249c8d723e7acbced483a55bfcea0d/tenor.gif' alt='dontpanic' referrerPolicy='no-referrer' /></p><p>&nbsp;</p><p>  </p><p>&nbsp;</p><p>&nbsp;</p></div>
</body>
</html>